function filter(str,show){
			var reg = /^阿扁推翻|阿宾|阿賓|我草你妈|操你妈|坦克|挨了一炮|爱液横流|安街逆|安局办公楼|安局豪华|安门事|安眠藥|案的准确|八九民|八九学|八九政治|把病人整|把邓小平|把学生整|罢工门|白黄牙签|败培训|办本科|办理本科|办理各种|办理票据|办理文凭|办理真实|办理证书|办理资格|办文凭|办怔|办证|半刺刀|辦毕业|辦證|谤罪获刑|磅解码器|磅遥控器|宝在甘肃修|保过答案|报复执法|爆发骚|北省委门|被打死|被指抄袭|被中共|本公司担|本无码|毕业證|变牌绝|辩词与梦|冰毒|冰火毒|冰火佳|冰火九重|冰火漫|冰淫传|冰在火上|波推龙|博彩娱|博会暂停|博园区伪|不查都|不查全|不思四化|布卖淫女|部忙组阁|部是这样|才知道只生|财众科技|采花堂|踩踏事|苍山兰|苍蝇水|藏春阁|藏獨|操了嫂|操嫂子|策没有不|插屁屁|察象蚂|拆迁灭|车牌隐|成人电|成人卡通|成人聊|成人片|成人视|成人图|成人文|成人小|城管灭|惩公安|惩贪难|充气娃|冲凉死|抽着大中|抽着芙蓉|出成绩付|出售发票|出售军|穿透仪器|春水横溢|纯度白|纯度黄|次通过考|催眠水|催情粉|催情药|催情藥|挫仑|达毕业证|答案包|答案提供|打飞机专|打死经过|打死人|打砸办公|大鸡巴|大雞巴|大纪元|Av|大揭露|大奶子|大批贪官|大肉棒|大嘴歌|代办发票|代办各|代办文|代办学|代办制|代辦|代表烦|代理发票|代理票据|代您考|代您考|代写毕|代写论|代孕|贷办|贷借款|贷开|戴海静|当代七整|当官要精|当官在于|党的官|党后萎|党前干劲|刀架保安|导的情人|导叫失|导人的最|导人最|导小商|到花心|得财兼|的同修|灯草和|等级證|等屁民|等人老百|AV|等人是老|等人手术|邓爷爷转|邓玉娇|地产之歌|地下先烈|地震哥|帝国之梦|递纸死|点数优惠|电狗|电话监|电鸡|甸果敢|蝶舞按|丁香社|丁子霖|顶花心|东北独立|东复活|东京热|東京熱|洞小口紧|都当警|都当小姐|都进中央|毒蛇钻|独立台湾|赌球网|短信截|对日强硬|多美康|躲猫猫|俄羅斯|恶势力操|恶势力插|恩氟烷|儿园惨|儿园砍|儿园杀|儿园凶|二奶大|发牌绝|发票出|发票代|发票销|發票|法车仑|法伦功|法轮|法轮佛|法维权|法一轮|法院给废|法正乾|反测速雷|反雷达测|反屏蔽|范燕琼|方迷香|防电子眼|防身药水|房贷给废|仿真枪|仿真证|诽谤罪|费私服|封锁消|佛同修|夫妻交换|福尔马林|福娃的預|福娃頭上|福香巴|府包庇|府集中领|妇销魂|附送枪|复印件生|复印件制|富民穷|富婆给废|改号软件|感扑克|冈本真|肛交|肛门是邻|岡本真|钢针狗|钢珠枪|港澳博球|港馬會|港鑫華|高就在政|高考黑|高莺莺|搞媛交|告长期|告洋状|格证考试|各类考试|各类文凭|跟踪器|工程吞得|工力人|公安错打|公安网监|公开小姐|攻官小姐|共狗|共王储|狗屁专家|鼓动一些|乖乖粉|官商勾|官也不容|官因发帖|光学真题|跪真相|滚圆大乳|国际投注|国家妓|国家软弱|国家吞得|国库折|国一九五七|國內美|哈药直销|海访民|豪圈钱|号屏蔽器|和狗交|和狗性|和狗做|黑火药的|红色恐怖|红外透视|紅色恐|胡江内斗|胡紧套|胡錦濤|胡适眼|胡耀邦|湖淫娘|虎头猎|华国锋|华门开|化学扫盲|划老公|还会吹萧|还看锦涛|环球证件|换妻|皇冠投注|黄冰|浑圆豪乳|活不起|火车也疯|机定位器|机号定|机号卫|机卡密|机屏蔽器|基本靠吼|绩过后付|激情电|激情短|激情妹|激情炮|级办理|级答案|急需嫖|集体打砸|集体腐|挤乳汁|擠乳汁|佳静安定|家一样饱|家属被打|甲虫跳|奸成瘾|兼职上门|监听器|监听王|简易炸|江胡内斗|江太上|江系人|江贼民|疆獨|蒋彦永|叫自慰|揭贪难|姐包夜|姐服务|姐兼职|姐上门|金扎金|av|金钟气|津大地震|津地震|进来的罪|京地震|京要地震|经典谎言|精子射在|警察被|警察的幌|警察殴打|警察说保|警车雷达|警方包庇|警用品|径步枪|敬请忍|究生答案|九龙论坛|九评共|酒象喝汤|酒像喝汤|就爱插|就要色|举国体|巨乳|据说全民|绝食声|军长发威|军刺|军品特|军用手|开邓选|开锁工具|開碼|開票|砍杀幼|砍伤儿|康没有不|康跳楼|考答案|考后付款|考机构|考考邓|考联盟|考前答|考前答案|考前付|考设备|考试包过|考试保|考试答案|考试机构|考试联盟|考试枪|考中答案|考研考中|磕彰|克分析|克千术|克透视|空和雅典|孔摄像|控诉世博|控制媒|口手枪|骷髅死|快速办|矿难不公|拉登说|拉开水晶|来福猎|拦截器|狼全部跪|浪穴|老虎机|雷人女官|类准确答|黎阳平|李洪志|李咏曰|理各种证|理是影帝|理证件|理做帐报|力骗中央|力月西|丽媛离|利他林|连发手|聯繫電|炼大法|两岸才子|两会代|两会又三|聊视频|聊斋艳|了件渔袍|猎好帮手|猎枪销|猎槍|獵槍|领土拿|流血事|六合彩|六死|六四事|六月联盟|龙湾事件|隆手指|陆封锁|陆同修|氯胺酮|乱奸|乱伦类|乱伦小|亂倫|伦理大|伦理电影|伦理毛|伦理片|轮功|轮手枪|论文代|罗斯小姐|裸聊网|裸舞视|落霞缀|麻古|麻果配|麻果丸|麻将透|麻醉狗|麻醉枪|麻醉槍|麻醉藥|蟆叫专家|卖地财政|卖发票|卖银行卡|卖自考|漫步丝|忙爱国|猫眼工具|毛一鲜|媒体封锁|每周一死|美艳少妇|妹按摩|妹上门|门按摩|门保健|門服務|氓培训|蒙汗药|迷幻型|迷幻药|迷幻藥|迷昏口|迷昏药|迷昏藥|迷魂香|迷魂药|迷魂藥|迷奸药|迷情水|迷情药|迷藥|谜奸药|蜜穴|灭绝罪|民储害|民九亿商|民抗议|明慧网|铭记印尼|摩小姐|母乳家|木齐针|幕没有不|幕前戲|内射|南充针|嫩穴|嫩阴|泥马之歌|你的西域|拟涛哥|娘两腿之间|妞上门|浓精|怒的志愿|女被人家搞|女激情|女技师|女人和狗|女任职名|女上门|女優|鸥之歌|拍肩神药|拍肩型|牌分析|牌技网|炮的小蜜|陪考枪|配有消|喷尿|嫖俄罗|嫖鸡|平惨案|平叫到床|仆不怕饮|普通嘌|期货配|奇迹的黄|奇淫散|骑单车出|气狗|气枪|汽狗|汽枪|氣槍|铅弹|钱三字经|枪出售|枪的参|枪的分|枪的结|枪的制|枪货到|枪决女犯|枪决现场|枪模|枪手队|枪手网|枪销售|枪械制|枪子弹|强权政府|强硬发言|抢其火炬|切听器|窃听器|禽流感了|勤捞致|氢弹手|清除负面|清純壆|情聊天室|情妹妹|情视频|情自拍|氰化钾|氰化钠|请集会|请示威|请愿|琼花问|区的雷人|娶韩国|全真证|群奸暴|群起抗暴|群体性事|绕过封锁|惹的国|人权律|人游行|人体艺|人在云上|人真钱|认牌绝|任于斯国|柔胸粉|肉洞|肉棍|如厕死|乳交|软弱的国|赛后骚|三挫|三级片|三秒倒|三网友|三唑|骚妇|骚浪|骚穴|骚嘴|扫了爷爷|色电影|色妹妹|色视频|色小说|杀指南|山涉黑|煽动不明|煽动群众|上门激|烧公安局|烧瓶的|韶关斗|韶关玩|韶关旭|射网枪|涉嫌抄袭|深喉冰|神七假|神韵艺术|生被砍|生踩踏|生肖中特|圣战不息|盛行在舞|尸博|失身水|失意药|狮子旗|十八等|十大谎|十大禁|十个预言|十类人不|十七大幕|实毕业证|实体娃|实学历文|士康事件|式粉推|视解密|是躲猫|手变牌|手答案|手狗|手机跟|手机监|手机窃|手机追|手拉鸡|手木仓|手槍|守所死法|兽交|售步枪|售纯度|售单管|售弹簧刀|售防身|售狗子|售虎头|售火药|售假币|售健卫|售军用|售猎枪|售氯胺|售麻醉|售冒名|售枪支|售热武|售三棱|售手枪|售五四|售信用|售一元硬|售子弹|售左轮|书办理|熟妇|术牌具|双管  立|双管平|水阎王|丝护士|丝情侣|丝袜保|丝袜恋|丝袜美|丝袜妹|丝袜网|丝足按|司长期有|司法黑|私房写真|死法分布|死要见毛|四博会|四大扯个|四小码|苏家屯集|诉讼集团|素女心|速代办|速取证|酸羟亚胺|蹋纳税|太王四神|泰兴幼|泰兴镇中|泰州幼|贪官也辛|探测狗|涛共产|涛一样胡|特工资|特码|特上门|体透视镜|替考|替人体|天朝特|天鹅之旅|天推广歌|田罢工|田田桑|田停工|庭保养|庭审直播|通钢总经|偷電器|偷肃贪|偷听器|偷偷贪|头双管|透视功能|透视镜|透视扑|透视器|透视眼镜|透视药|透视仪|秃鹰汽|突破封锁|突破网路|推油按|脱衣艳|瓦斯手|袜按摩|外透视镜|外围赌球|湾版假|万能钥匙|万人骚动|王立军|王益案|网民案|网民获刑|网民诬|微型摄像|围攻警|围攻上海|维汉员|维权基|维权人|维权谈|委坐船|谓的和谐|温家堡|温切斯特|温影帝|溫家寶|瘟加饱|瘟假饱|文凭证|文强|纹了毛|闻被控制|闻封锁|瓮安|我的西域|我搞台独|乌蝇水|无耻语录|五套功|无码专|五月天|午夜电|午夜极|武警暴|武警殴|武警已增|务员答案|务员考试|雾型迷|西藏限|西服进去|希脏|习进平|习晋平|席复活|席临终前|席指着护|洗澡死|喜贪赃|先烈纷纷|现大地震|现金投注|线透视镜|限制言|陷害案|陷害罪|相自首|香港论坛|香港马会|香港一类|香港总彩|硝化甘|小穴|校骚乱|协晃悠|写两会|泄漏的内|新建户|新疆叛|新疆限|新金瓶|新唐人|信访专班|信接收器|兴中心幼|星上门|行长王益|形透视镜|型手枪|姓忽悠|幸运码|性爱日|性福情|性感少|性推广歌|胸主席|徐玉元|学骚乱|学位證|學生妹|丫与王益|烟感器|严晓玲|言被劳教|言论罪|盐酸曲|颜射|恙虫病|姚明进去|要人权|要射精了|要射了|要泄了|夜激情|液体炸|一小撮别|遗情书|蚁力神|益关注组|益受贿|阴间来电|陰唇|陰道|陰戶|淫魔舞|淫情女|淫肉|淫騷妹|淫兽|淫兽学|淫水|淫穴|隐形耳|隐形喷剂|应子弹|婴儿命|咏妓|用手枪|幽谷三|游精佑|有奶不一|右转是政|幼齿类|娱乐透视|愚民同|愚民政|与狗性|玉蒲团|育部女官|冤民大|鸳鸯洗|园惨案|园发生砍|园砍杀|园凶杀|园血案|原一九五七|原装弹|袁腾飞|晕倒型|韵徐娘|遭便衣|遭到警|遭警察|遭武警|择油录|曾道人|炸弹教|炸弹遥控|炸广州|炸立交|炸药的制|炸药配|炸药制|张春桥|找枪手|找援交|找政法委副|赵紫阳|针刺案|针刺伤|针刺事|针刺死|侦探设备|真钱斗地|真钱投注|真善忍|真实文凭|真实资格|震惊一个民|震其国土|证到付款|证件办|证件集团|证生成器|证书办|证一次性|政府操|政论区|證件|植物冰|殖器护|指纹考勤|指纹膜|指纹套|至国家高|志不愿跟|制服诱|制手枪|制证定金|制作证件|中的班禅|中共黑|中国不强|种公务员|种学历证|众像羔|州惨案|州大批贪|州三箭|宙最高法|昼将近|主席忏|住英国房|助考|助考网|专业办理|专业代|专业代写|专业助|转是政府|赚钱资料|装弹甲|装枪套|装消音|着护士的胸|着涛哥|姿不对死|资格證|资料泄|梓健特药|字牌汽|自己找枪|自慰用|自由圣|总会美女|足球玩法|最牛公安|醉钢枪|醉迷药|醉乙醚|尊爵粉|左转是政|作弊器|作各种证|作硝化甘|唑仑|做爱小|做原子弹|做证件|啪啪啪|aV/g;
			if(reg.test(str)){
				show.css("display","block");
			}else{
				show.css("display","none");
			}
		};

$(function() {
	$("#btn-sub").click(function() {
		subBtn(getFormData());
	})
	$("#close-div").click(function() {
		$("#icon-div").hide();
		window.location.reload(); 
	});
	$("#group-name").blur(function(){
		if($(this).val().length == 0){
			$(".group-name").css("display","block");
		}else{
			$(".group-name").css("display","none");
		};
		filter($(this).val(),$(".sensitive-words"));
	});
	$("#group-introduce").blur(function(){
		if($(this).val().length == 0){
			$(".introduce").css("display","block");
		}else{
			$(".introduce").css("display","none");
		};
		filter($(this).val(),$(".sensitive-words-introduce"));
	});
	$("#group-personnelCost-change").blur(function(){
		if($(this).val().length == 0){
			$(".detailed-address").css("display","block");
		}else{
			$(".detailed-address").css("display","none");
		};
		filter($(this).val(),$(".sensitive-words-detailed-address"));
	});
	$("#group-quantity").blur(function(){
		var reg = /^[^\u4e00-\u9fa5]+$/;
		if(reg.test($(this).val()) && $(this).val().length !== 0 && $(this).val().length > 0){
			$(".personnel").css("display","none");
		}else{
			$(".personnel").css("display","block");
		};
	});
	$("#group-toolCost").blur(function(){
		var reg = /^[^\u4e00-\u9fa5]+$/;
		if(reg.test($(this).val()) && $(this).val().length !== 0 && $(this).val().length > 0){
			$(".tool").css("display","none");
		}else{
			$(".tool").css("display","block");
		};
	});
	$("#group-toolExplain").blur(function(){
		if($(this).val().length == 0){
			$(".toolExplain").css("display","block");
		}else{
			$(".toolExplain").css("display","none");
		};
		filter($(this).val(),$(".sensitive-words-toolExplain"));
	});
	$("#group-personnelCost").blur(function(){
		var reg = /^[^\u4e00-\u9fa5]+$/;
		if(reg.test($(this).val()) && $(this).val().length !== 0 && $(this).val().length > 0){
			$(".personnel-money").css("display","none");
		}else{
			$(".personnel-money").css("display","block");
		};
	});
	$("#group-personnelDivision").blur(function(){
		if($(this).val().length == 0){
			$(".personnelDivision").css("display","block");
		}else{
			$(".personnelDivision").css("display","none");
		};
		filter($(this).val(),$(".sensitive-words-personnelDivision"));
	});
});

function subBtn(group) {
	$.ajax({
		url : "/group/submit-or-update",
		type : "POST",
		dataType : "JSON",
		async : false, // 这是一个同步请求
		cache : false, // 上传文件不需要缓存
		processData : false, // 因为data值是FormData对象，不需要对数据做处理。
		contentType : false, // 使用 form 表单构造的contentType
		data : getFormData(), // 获取 data
		data : group,
		success : function(data) {
			if (data.ret == qc.retEnum.PAR_LACK) {
				layer.alert("请填写完整！");
			} else if (data.ret == qc.retEnum.SUCCESS) {
				layer.msg("保存成功");
				setTimeout(function(){window.location.reload()},800);
			} else {
				layer.alert(data.msg)
			}
		}
	})
}

function getFormData() {
	//<form>标签需要添加 enctype="multipart/form-data"属性。
	var data = new FormData($("#form")[0]);
	
	return data;
}



//团体照片

$(function() {

	// 当 input file 文件被改变的时候触发的事件
	$("input[type=file]").change(function(e) {

		// new 一个 FileReader 对象
		var fr = new FileReader();

		// 获取 文件列表中的第一个文件
		var creentFile = $(this).get(0).files[0];

		// 添加进fr中
		fr.readAsDataURL(creentFile);

		// 当文件读取完毕的时候调用的方法
		fr.onload = function(e) {
			var img = $("img.BusinessLicense-img").attr("src", this.result);
			img.css("display", "inline-block");

		};
	});
});



function tijiao() {
	var Team = document.getElementById("Team"),
		homework = document.getElementById("homework"),
		company = document.getElementById("company"),
		tools = document.getElementById("tools"),
		PersonnelCosts = document.getElementById("PersonnelCosts"),
		address = document.getElementById("address"),
		industryId = document.getElementById("industryId"),
		//
		teamWarning = document.getElementById("teamWarning"),
		homeworkWarning = document.getElementById("homeworkWarning"),
		companyWarning = document.getElementById("companyWarning"),
		toolsWarning = document.getElementById("toolsWarning"),
		PersonnelCostsWarning = document.getElementById("PersonnelCostsWarning"),
		addressWarning = document.getElementById("addressWarning"),
		industry = document.getElementById("industry"),
		groupName = document.getElementById("groupName"),
		groupNameRequiredFilling = document.getElementById("groupNameRequiredFilling");

	//groupName	
	if ((groupName.value.length !== 0) && (groupName.value.length < 21)) {
		groupNameRequiredFilling.style.display = "none";
	} else {
		groupNameRequiredFilling.style.display = "block";
	}
	//	//Team
	//	if(Team.value.length == 0){
	//		teamWarning.style.display = "block";
	//	}else{
	//		teamWarning.style.display = "none";
	//	}
	//homework
	if (homework.value.length == 0) {
		homeworkWarning.style.display = "block";
	} else {
		homeworkWarning.style.display = "none";
	}
	//	//company
	//	if(company.value.length == 0){
	//		companyWarning.style.display = "block";
	//	}else{
	//		companyWarning.style.display = "none";
	//	}
	//tools
	if (tools.value.length == 0) {
		toolsWarning.style.display = "block";
	} else {
		toolsWarning.style.display = "none";
	}
	//PersonnelCosts
	//	if(PersonnelCosts.value.length == 0){
	//		PersonnelCostsWarning.style.display = "block";
	//	}else{
	//		PersonnelCostsWarning.style.display = "none";
	//	}
	//address
	if (address.value.length == 0) {
		addressWarning.style.display = "block";
	} else {
		addressWarning.style.display = "none";
	}
	//industry
	if (industryId.value.length == 0) {
		industry.style.display = "block";
	} else {
		industry.style.display = "none";
	}
}


//时间
var lq_datetimepick = false;
$.fn.lqdatetimepicker = function(options) {
	lq_datetimepick = true;
	return this.each(function() {
		var $this = $(this);
		if ($("#lq-datetimepick").length > 0) $("#lq-datetimepick").remove();
		var _this = {
			css : "datetime-day", //datetime-hour 时分样式 ，datetime-day 日期样式
			offset : {
				left : 0,
				top : 10
			},
			dateType : 'H', //H选择时分，D选择日期
			date : {
				'H' : {
					begin : '8:00', //开始时分
					end : '23:30', //结束时分
					step : "30" //时分步长
				},
				'D' : {
					month : new Date(), //日期默认时间
					selected : (new Date()).getDate()
				},
				'M' : {
					begin : 1, //月份开始
					end : 12, //月份结束
					selected : (new Date()).getMonth() + 1 //月份初始
				},
				'Y' : {
					begin : 1900, //年份开始
					end : (new Date()).getFullYear(), //年份结束
					selected : (new Date()).getFullYear() //年份初始
				}
			},
			selectback : function() {}, //选择时间的事件回调
			callback : function() {} //初始化时间事件回调
		};
		$.extend(_this, options);

		var _obj = $("<div class=\"lq-datetimepick\" id=\"lq-datetimepick\" />");
		var _arr = $("<div class=\"datetime-arr\" />");
		var _container = $("<div class=\"select-datetime\" />");
		var _selectitem = $("<div class=\"datetime-select\" />");
		var _header = $("<dl class=\"datetime-time\"></dl>");
		var _item = $("<dl class=\"datetime-time\"></dl>");


		var _day;

		var _datevalue = $this.val() == '' ? new Date() : new Date($this.val().replace(/-/g, "/"));
		var _dateyear = _datevalue.getFullYear();
		var _datemonth = _datevalue.getMonth() + 1;
		var _datedate = _datevalue.getDate();

		var _x = $this.offset().left + _this.offset.left,
			_y = $this.offset().top + $this.outerHeight() + _this.offset.top;

		if (_this.css != undefined || _this.css != '') {
			_header.addClass(_this.css);
			_item.addClass(_this.css);
		}

		if ($this.val() != '') {
			_this.date.D.month = new Date($this.val().replace(/-/g, "/"));
		}


		$.fn.lqdatetimepicker.setDateData($this, _obj, _item, _this);

		//日期
		if (_this.dateType == 'D') {

			//年份
			var _select_year = $.fn.lqdatetimepicker.setSelectData(_this, 'Y');
			var _selectul_year = $("<div class=\"selectul\" id=\"lqyear\" />");
			var _select_year_t = $("<div class=\"selectfocus\"></div>");
			if (_dateyear != '') _select_year_t.attr("data-value", _dateyear);
			_select_year_t.html("<em>选择年份</em>");
			_select_year_t.appendTo(_selectul_year);
			_select_year.appendTo(_selectul_year);
			_selectul_year.appendTo(_selectitem);
			_selectitem.appendTo(_container);


			//月份
			var _select_month = $.fn.lqdatetimepicker.setSelectData(_this, 'M');
			var _selectul_month = $("<div class=\"selectul\" id=\"lqmonth\" />");
			var _select_month_t = $("<div class=\"selectfocus\"></div>");
			if (_datemonth != '') _select_month_t.attr("data-value", _datemonth);
			_select_month_t.html("<em>选择月份</em>");
			_select_month_t.appendTo(_selectul_month);
			_select_month.appendTo(_selectul_month);
			_selectul_month.appendTo(_selectitem);
			_selectitem.appendTo(_container);

			//星期
			_week = $.fn.lqdatetimepicker.intWeek();
			for (var i = 0; i < 7; i++) {
				_day = $("<dt><span>" + _week[i] + "</span></dt>");
				_day.appendTo(_header);
			}
			_header.appendTo(_container);
		}

		_arr.appendTo(_obj);
		_container.appendTo(_obj);
		_item.appendTo(_container);
		_obj.appendTo("body").css({
			left : _x + 'px',
			top : _y + 'px'
		}).show();
		_this.callback();

		LQ.selectUi.show({
			id : "lqyear",
			hiddenInput : "selectYear",
			pulldown : function() {
				var _year = $("#selectYear").val();
				var _month = $("#selectMonth").val();
				var _day = $(".datetime-time>dd.selected").attr("data-value");
				_day = _day == undefined ? _this.date.D.selected : _day;
				
				_day = parseInt(_day) + 1;
				do {
					_day--;
					var tempMonth = new Date(_year + '/' + _month + '/' + _day).getMonth() + 1;
				} while (tempMonth != _month);
				
				_this.date.D.month = new Date(_year + '/' + _month + '/' + _day);
				$.fn.lqdatetimepicker.setDateData($this, _obj, _item, _this);
			}
		});
		LQ.selectUi.show({
			id : "lqmonth",
			hiddenInput : "selectMonth",
			pulldown : function() {
				var _year = $("#selectYear").val();
				var _month = $("#selectMonth").val();
				var _day = $(".datetime-time>dd.selected").attr("data-value");
				_day = _day == undefined ? _this.date.D.selected : _day;
				
				_day = parseInt(_day) + 1;
				do {
					_day--;
					var tempMonth = new Date(_year + '/' + _month + '/' + _day).getMonth() + 1;
				} while (tempMonth != _month);
				
				_this.date.D.month = new Date(_year + '/' + _month + '/' + _day);
				$.fn.lqdatetimepicker.setDateData($this, _obj, _item, _this);
			}
		});

		_obj.on("click", function(e) {
			e.stopPropagation();
		});

		$(document).on("click", function(e) {
			if (lq_datetimepick) {
				_obj.remove();
			}
		});

	})

};

$.fn.lqdatetimepicker.setDateData = function($this, _obj, _item, _this) {
	var _time;
	var _datetime = $.fn.lqdatetimepicker.setDateTime(_this);
	if (typeof (_datetime) == 'object') {
		_item.empty();
		for (var i = 0; i < _datetime.length; i++) {
			_time = $("<dd data-value=" + _datetime[i] + "><em>" + _datetime[i] + "</em></dd>");
			if (_this.dateType == 'D') {
				_time.attr('data-value', _this.date.D.month.getFullYear() + '-' + (_this.date.D.month.getMonth() + 1) + '-' + _time.attr('data-value'))
			}
			_time.on("click", function() {
				$this.val($(this).attr("data-value"));
				_obj.remove();
				_this.selectback();
			});
			_time.hover(function() {
				$(this).addClass('over');
			}, function() {
				$(this).removeClass('over');
			});
			if ($this.val() == _datetime[i]) {
				_time.addClass('selected')
			}
			if (($this.val() == '') && (_this.dateType == 'D') && (_this.date.D.month.getDate() == _datetime[i])) {
				_time.addClass('current');
			}
			if ((new Date($this.val()).getDate() == _datetime[i]) && (_this.dateType == 'D')) {
				_time.addClass('current');
			}
			if (_datetime[i] == '') {
				_time.addClass('blank');
			}
			_time.appendTo(_item);
		}
	}
}

$.fn.lqdatetimepicker.setDateTime = function(_this) {
	var dateTime;
	if (_this.dateType == 'H') {
		dateTime = $.fn.lqdatetimepicker.intHourTime(_this);
	} else if (_this.dateType == 'D') {
		dateTime = $.fn.lqdatetimepicker.intDayTime(_this);
	}
	return dateTime;
};

$.fn.lqdatetimepicker.setSelectData = function(_this, type) {
	var _data;
	var _cell;
	var _select = $("<select></select>");
	if (type == 'Y') {
		_data = $.fn.lqdatetimepicker.intYearTime(_this);
		_cell = '年';
	}
	if (type == 'M') {
		_data = $.fn.lqdatetimepicker.intMonthTime(_this);
		_cell = '月'
	}
	for (var i = 0; i < _data.length; i++) {
		$("<option></option>").text(_data[i] + _cell).attr("value", _data[i]).appendTo(_select);
	}
	return _select;

};

/*时分*/
$.fn.lqdatetimepicker.intHourTime = function(_this) {
	var begindate = _this.date.H.begin;
	var enddate = _this.date.H.end;
	var stepdate = _this.date.H.step;
	var _a = [];
	var _date = new Date();
	var _now = _date.getFullYear() + "/" + (_date.getMonth() + 1) + "/" + _date.getDate();
	var _begindate = new Date(_now + " " + begindate);
	var _enddate = new Date(_now + " " + enddate);

	var _hours = _enddate.getHours() - _begindate.getHours();
	var _minutes = _enddate.getMinutes() - _begindate.getMinutes();
	var _len = (_hours * 60 + _minutes) / stepdate;

	for (var i = 0; i <= _len; i++) {
		var _t = $.fn.lqdatetimepicker.dateAdd('M', stepdate * i, _begindate);
		_a.push(_t.getHours() + ":" + (_t.getMinutes() >= 10 ? _t.getMinutes() : '0' + _t.getMinutes()));
	}
	return _a;
};

/*日期*/
$.fn.lqdatetimepicker.intDayTime = function(_this) {
	var _a = [];
	var _date = _this.date.D.month;
	var _year = _date.getFullYear();
	var _month = _date.getMonth();
	var _week = new Date(_year + '/' + (_month + 1) + '/1').getDay(); // 当前月的第一天
	var _day = 32 - new Date(_year, _month, 32).getDate();
	var _cell = Math.ceil((_week + _day) / 7) * 7 - (_week + _day);

	for (var w = 0; w < _week; w++) {
		_a.push('');
	}
	for (var i = 0; i < _day; i++) {
		_a.push(i + 1);
	}
	for (var w = 0; w < _cell; w++) {
		_a.push('');
	}
	return _a;
};

/*月份*/
$.fn.lqdatetimepicker.intMonthTime = function(_this) {
	var _a = [];
	var _month_begin = _this.date.M.begin;
	var _month_end = _this.date.M.end;
	for (var i = _month_begin, j = _month_end + 1; i < j; i++) {
		_a.push(i);
	}
	return _a;
}

/*年份*/
$.fn.lqdatetimepicker.intYearTime = function(_this) {
	var _a = [];
	var _year_begin = _this.date.Y.begin;
	var _year_end = _this.date.Y.end;
	for (var i = _year_begin, j = _year_end + 1; i < j; i++) {
		_a.push(i);
	}
	return _a;
}

$.fn.lqdatetimepicker.intWeek = function() {
	return [ '星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六' ]
}

$.fn.lqdatetimepicker.dateAdd = function(interval, NumDay, dtDate) {
	var dtTmp = new Date(dtDate);
	if (isNaN(dtTmp))
		dtTmp = new Date();
	switch (interval.toUpperCase()) {
	case "S":
		return new Date(Date.parse(dtTmp) + (1000 * NumDay));
	case "M":
		return new Date(Date.parse(dtTmp) + (60000 * NumDay));
	case "H":
		return new Date(Date.parse(dtTmp) + (3600000 * NumDay));
	case "D":
		return new Date(Date.parse(dtTmp) + (86400000 * NumDay));
	case "W":
		return new Date(Date.parse(dtTmp) + ((86400000 * 7) * NumDay));
	case "M":
		return new Date(dtTmp.getFullYear(), (dtTmp.getMonth()) + NumDay, dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());
	case "Y":
		return new Date((dtTmp.getFullYear() + NumDay), dtTmp.getMonth(), dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());
	}
};


var LQ = jQuery;
LQ.selectUi = {
	show : function(options) {
		var def = {
			id : "", //selectUi的ID值
			hiddenInput : "", //设置下拉列表获取值保存的字段；
			selectInit : "", //接收下拉表数据，数组[{name:name,value:value}]
			selectNext : "", //二级菜单值
			pulldown : function() {}, //下拉列表选择后返回函数
			callback : function() {} //callback 初始插件时返回函数
		};
		var ini = $.extend(def, options);

		var $this = $("#" + ini.id);
		if ($this.length <= 0) return;

		$this.css({
			zIndex : 10
		});
		$this.addClass("select_ul_ui");

		if (ini.selectInit) {
			if (typeof (ini.selectInit) == 'object') {
				var option = '';
				if (typeof (ini.selectInit[0]) != 'object' && ini.selectInit[0] == '') return;
				for (var i = 0; i < ini.selectInit.length; i++) {
					option += "<option value=" + ini.selectInit[i]['AID'] + ">" + ini.selectInit[i]['AName'] + "</option>";
				//option+="<option value="+ini.selectInit[i]['value']+">"+ini.selectInit[i]['name']+"</option>";
				}
				$this.children('select').remove();
				$this.append('<select>' + option + '</select>');
			}

		}

		var sel = $this.children("select");
		if (sel.length <= 0) return;
		var sellen = sel.children("option").length;
		var ulid;
		var html = "";
		sel.hide();

		if (ini.hiddenInput) {
			$u = ini.hiddenInput;
		} else {
			$u = ini.id;
		}

		/*是否传值过来*/
		$val = $this.children(".selectfocus").attr("data-value");
		$options = sel.find("option");
		if ($val != undefined) {
			if ($options.length == 0) {
				//获取同类值
				val = LQ.selectUi.getPreventData($val);
				LQ.selectUi.appendData(ini.id, val);
				LQ.selectUi.selectOption(sel, $val);

			} else {
				LQ.selectUi.selectOption(sel, $val);

			}
		}

		var items = 0;
		for (var i = 0; i < sel.children("option").length; i++) {
			html += "<li data-val=" + sel.children("option").eq(i).val() + ">" + sel.children("option").eq(i).html() + "</li>";
			items++;

		}
		ulid = "ul_" + $u;
		$this.append('<input type=\"hidden\" name=\"' + $u + '\" id=\"' + $u + '\" />');

		/*传值后设置hidden值*/

		if ($val != undefined) {
			LQ.selectUi.setHiddenValue($this, $val);
		}

		/*是否已经选定值*/
		if (sel.find("option[selected]").text() != '') {
			$this.children(".selectfocus").html('<em>' + sel.find("option[selected]").text() + '</em>');
			$("#" + ini.hiddenInput).val(sel.find("option[selected]").val());
		}

		$this.children("#" + ulid + "").remove();
		$this.append('<ul id=' + ulid + '>' + html + '</ul>');

		var ul = $this.children("ul");
		if (items > 10) {
			ul.height(200);
		}

		ini.callback();

		ul.css({
			zIndex : 11
		}).width($this.width() - 2);
		ul.children("li").bind("click", function(e) {
			e.stopPropagation();
			$(this).parent().siblings('.selectfocus').html('<em>' + $(this).text() + '</em>');
			$(this).parent().siblings('input[type="hidden"]').val($(this).attr("data-val"));
			ulStatus();
			ini.pulldown();

			if (ini.selectNext) {
				LQ.selectUi.selectFun(ini.selectNext, $(this).attr("data-val"));
			}
		});

		$this.bind("click", function(e) {
			e.stopPropagation();
			var id = $(".select_ul_ui").index($this); //获取索引值
			ulhide(id);
			ulStatus();
		});

		$(document).bind("click", function(e) {
			var status = ul.css("display");
			if (status != "none") {
				ul.hide();
				ul.parent().css({
					zIndex : 11
				});
			}
		})

		function ulStatus() {
			if (ul.css("display") == "none") {
				ul.show();
				ul.parent().css({
					zIndex : 13
				});
			} else {
				ul.hide();
				ul.parent().css({
					zIndex : 11
				});
			}
		}

		function ulhide(id) {
			var len = $(".select_ul_ui").length;
			if (len == 0) return;
			for (var i = 0; i < len; i++) {
				if (i != id) {
					$(".select_ul_ui").eq(i).children("ul").hide().parent().css({
						zIndex : 11
					});
				}
			}
		}

	},
	selectOption : function($sel, $val) {
		if ($val == undefined) return;
		$sel.find("option").each(function(index, element) {
			if ($(element).val() == $val) {
				$(element).attr("selected", "true");
			}
		})
	},
	setHiddenValue : function($this, $val) {
		if ($val == undefined) return;
		$this.children('input[type="hidden"]').val($val);
	},
	selectFun : function(obj, value) {
		var id = obj['selectid'];
		$("#" + id).show();
		$("#" + id).children('.selectfocus').html('<em>' + obj['selectTxt'] + '</em>');
		$("#" + id).children('input[type="hidden"]').val('');
		LQ.selectUi.appendData(id, value);
		$("#" + id).find("li").bind("click", function(e) {
			e.stopPropagation();
			$(this).parent().siblings('.selectfocus').html('<em>' + $(this).text() + '</em>');
			$(this).parent().siblings('input[type="hidden"]').val($(this).attr("data-val"));
			$(this).parent().hide().css({
				zIndex : 11
			});
		});
	},
	appendData : function(id, val) {
		var items = 0;
		var value = LQ.selectUi.getData(val);
		if (value) {
			if (typeof (value) == 'object') {
				var option = '';
				var listr = '';
				if (typeof (value[0]) != 'object' && value[0] == '') return;
				for (var i = 0; i < value.length; i++) {
					option += "<option value=" + value[i]['AID'] + ">" + value[i]['AName'] + "</option>";
					listr += "<li data-val=" + value[i]['AID'] + ">" + value[i]['AName'] + "</li>";
					items++;
				}
				$("#" + id).children("select").empty();
				$("#" + id).children("select").append(option);
				$("#" + id).children("ul").empty();
				$("#" + id).children("ul").append(listr);
			}
		}

		var ul = $("#" + id).children("ul");
		if (items > 10) {
			ul.height(200);
		} else {
			ul.height('');
		}

	},
	getData : function(value) {
		var html = [];
		for (var i = 0; i < areas.length; i++) {
			if (areas[i]["APid"] == value) {
				html.push(areas[i]);
			}
		}
		return html;
	},
	getPreventData : function(value) {
		var $id = null;
		for (var i = 0; i < areas.length; i++) {
			if (areas[i]["AID"] == value) {
				$id = areas[i]["APid"];
			}
		}
		return $id;
	}
}
$(function() {
	$("#datetimepicker1").on("click", function(e) {
		e.stopPropagation();
		$(this).lqdatetimepicker({
			css : 'datetime-hour'
		});

	});


	$("#datetimepicker2").on("click", function(e) {
		e.stopPropagation();
		$(this).lqdatetimepicker({
			css : 'datetime-hour'
		});

	});

	$("#datetimepicker3").on("click", function(e) {
		e.stopPropagation();
		$(this).lqdatetimepicker({
			css : 'datetime-day',
			dateType : 'D',
			selectback : function() {}
		});

	});
});
(function() {
	var region = {
		query : function(code, nextLevel) {
			var t = 3;
			$.ajax({
				url : "/region/query/child",
				type : "GET",
				dataType : "JSON",
				data : {
					parentCode : code
				},
				beforeSend : function() {
					for (var i = nextLevel; i <= 3; i++) {
						$("select.region-" + i).empty();
					}
					$("select.region-" + nextLevel).append($('<option value="-1">查询中...</option>'));
				},
				success : function(r) {
					t = 4;
					if (r.ret == 0) {
						// 查询成功
						region.setValue(nextLevel, r.list);
						// 重新绑定方法
						$("select.region-" + nextLevel).change(region.bindChange);
					} else {
						layer.alert(r.msg);
					}
				}
			})
		},
		setValue : function(level, list, selected) {
			var obj = $("select.region-" + level).empty();
			obj.append($("<option value='-1'>请选择...</option>"))
			for (var i = 0; i < list.length; i++) {
				var temp = $("<option value='" + list[i].regionCode + "'>" + list[i].regionName + "</option>");
				if (selected && list[i].regionCode == selected) {
					temp.attr("selected", true);
				}
				obj.append(temp);
			}
		},
		bindChange : function() {
			// 获取当前级别
			var name = $(this).attr("class");
			var level = parseInt(name.substring(name.length - 1, name.length));
			if (++level > 3 || $(this).val() == "-1") {
				return;
			}
			region.query($(this).val(), level);
		},
		queryParent : function(code) {
			$.ajax({
				url : "/region/query/parent",
				type : "GET",
				dataType : "JSON",
				data : {
					childCode : code
				},
				success : function(r) {
					if (r.ret == 0) {
						var level = 1;
						for (var i = 0; i < r.list.length; i++, level++) {
							// 查询成功
							region.setValue(level, r.list[i].all, r.list[i].selected);
							// 重新绑定方法
							$("select.region-" + (i + 1)).change(region.bindChange);
						}
					} else {
						layer.alert(r.msg);
					}
				},
				complete : function() {
					$(".region-mask").css("display", "none");
				}
			});
		}
	}

	if (regionCode) {
		// 反向查询父级
		region.queryParent(regionCode);
	} else {
		// 正向查询
		region.query("0", 1);
	}
})();